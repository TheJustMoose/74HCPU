entry:
  out CPU_FLAGS, 0x40 ; BF = 1
  mov SPL, 0xFF    ; init stack
  mov SPH, 0xFF
  mov VL, 0        ; init Video RAM ptr
  mov VH, 0
  out CPU_FLAGS, 0 ; BF = 0

  mov R0, 31       ; color and y counter
  xor R1, R1
b_lp:
  call line
  call line
  add R0, 0xFF     ; dec R0
  jnz b_lp

  mov R4, 31       ; color and y counter
  xor R1, R1
g_lp:
  mov R0, R4
  mul R0, 32       ; 5 bit left shift
  call line
  call line
  add R4, 0xFF     ; dec R4
  jnz g_lp

  mov R4, 31       ; color and y counter
  xor R0, R0
r_lp:
  mov R1, R4
  add R1, R1
  add R1, R1
  call line
  call line
  add R4, 0xFF     ; dec R4
  jnz r_lp

  stop

line:
  ; LCD width = 480, it's 0x1E0
  mov R2, LO(480)
  mov R3, HI(480)
x_lp:
  stv Vi, R0       ; will write to video memory
  add R2, 0xFF     ; R3:R2--
  addc R3, 0xFF
  cmp R3, 0
  cmpc R2, 0
  jne x_lp

  ret

print_glyph:
  out CPU_FLAGS, 0x40 ; BF = 1
  mov  YL, LO(glyph_A)
  mov  YH, HI(glyph_A)
  out CPU_FLAGS, 0    ; BF = 0

  ld   R0, Yi  ; width
  ld   R1, Yi  ; height

xloop:

yloop:
  jnz  yloop

  ret

; 'A' image.size: (14, 17)
.db glyph_A 14, 17, \ ; width, height, data...
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xB6, 0xFF, 0x71, 0x00, 0x00, 0x00, 0x00, 0x00, \
 0x00, 0x00, 0x00, 0x00, 0x00, 0x0F, 0xF9, 0xFF, 0xC2, 0x00, 0x00, 0x00, 0x00, 0x00, \
 0x00, 0x00, 0x00, 0x00, 0x00, 0x5A, 0xFF, 0xFF, 0xFD, 0x15, 0x00, 0x00, 0x00, 0x00, \
 0x00, 0x00, 0x00, 0x00, 0x00, 0xAE, 0xFF, 0xE7, 0xFF, 0x66, 0x00, 0x00, 0x00, 0x00, \
 0x00, 0x00, 0x00, 0x00, 0x0B, 0xF6, 0xFA, 0x61, 0xFF, 0xB6, 0x00, 0x00, 0x00, 0x00, \
 0x00, 0x00, 0x00, 0x00, 0x53, 0xFF, 0xBC, 0x0D, 0xF9, 0xF9, 0x0E, 0x00, 0x00, 0x00, \
 0x00, 0x00, 0x00, 0x00, 0xA7, 0xFF, 0x6E, 0x00, 0xBA, 0xFF, 0x59, 0x00, 0x00, 0x00, \
 0x00, 0x00, 0x00, 0x07, 0xF3, 0xFF, 0x21, 0x00, 0x6E, 0xFF, 0xAA, 0x00, 0x00, 0x00, \
 0x00, 0x00, 0x00, 0x4D, 0xFF, 0xD5, 0x00, 0x00, 0x22, 0xFF, 0xF3, 0x09, 0x00, 0x00, \
 0x00, 0x00, 0x00, 0x9E, 0xFF, 0x87, 0x00, 0x00, 0x00, 0xD6, 0xFF, 0x4E, 0x00, 0x00, \
 0x00, 0x00, 0x04, 0xEE, 0xFF, 0x3A, 0x00, 0x00, 0x00, 0x8A, 0xFF, 0x9E, 0x00, 0x00, \
 0x00, 0x00, 0x44, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xEB, 0x04, 0x00, \
 0x00, 0x00, 0x97, 0xFF, 0xF3, 0xE8, 0xE8, 0xE8, 0xE8, 0xE8, 0xFB, 0xFF, 0x42, 0x00, \
 0x00, 0x02, 0xE8, 0xFF, 0x49, 0x00, 0x00, 0x00, 0x00, 0x00, 0x9E, 0xFF, 0x92, 0x00, \
 0x00, 0x3D, 0xFF, 0xEE, 0x06, 0x00, 0x00, 0x00, 0x00, 0x00, 0x4A, 0xFF, 0xE5, 0x01, \
 0x00, 0x91, 0xFF, 0xA0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x06, 0xF0, 0xFF, 0x36, \
 0x01, 0xE2, 0xFF, 0x4B, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xA3, 0xFF, 0x86
